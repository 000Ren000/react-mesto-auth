{"ast":null,"code":"var _jsxFileName = \"/Users/antonfondov/Ya_Project/mesto-react/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport ImagePopup from './ImagePopup.js';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { api } from '../utils/Api.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({\n    name: '',\n    link: ''\n  });\n\n  const handleEditAvatarClick = () => setEditAvatarPopupOpen(true);\n\n  const handleEditProfileClick = () => setIsEditProfilePopupOpen(true);\n\n  const handleAddPlaceClick = () => setAddPlacePopupOpen(true);\n\n  const closeAllPopups = () => {\n    setEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setSelectedCard({\n      name: '',\n      link: ''\n    });\n  };\n\n  const [currentUser, setCurrentUser] = useState({\n    myID: '',\n    about: '',\n    avatar: '',\n    cohort: '',\n    name: ''\n  });\n  useEffect(() => {\n    api.getUserInfo().then(setCurrentUser).catch(err => console.log('что-то пошло не так', err));\n  }, []);\n\n  const handleUpdateUser = data => {\n    api.setUserInfo(data).then(setCurrentUser).catch(err => console.log('что-то пошло не так', err));\n  };\n\n  const handleUpdateAvatar = data => {\n    api.changeAvatar(data.avatar).then(setCurrentUser).catch(err => console.log('что-то пошло не так', err));\n  }; //Получение массива с карточками\n\n\n  const [cards, setCards] = useState([]);\n  useEffect(() => {\n    api.getCardInfo().then(data => {\n      setCards(data.map(item => ({\n        likes: item.likes,\n        link: item.link,\n        name: item.name,\n        _id: item._id,\n        key: item._id,\n        authorCardId: item.owner._id\n      })));\n    }).catch(err => console.log('что-то пошло не так', err));\n  }, []);\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id); // Отправляем запрос в API и получаем обновлённые данные карточки\n\n    api.changeLikeCardStatus(card._id, isLiked).then(newCard => {\n      setCards(state => state.map(c => {\n        c.key = c._id;\n        return c._id === card._id ? newCard : c;\n      }));\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then(newCard => {\n      setCards(state => state.filter(c => c._id !== card._id));\n    });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.setNewCardInfo(data).then(newCard => {\n      setCards([newCard, ...cards]);\n    }).catch(err => console.log('что-то пошло не так', err));\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"root\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        onEditProfile: handleEditProfileClick,\n        onAddPlace: handleAddPlaceClick,\n        onEditAvatar: handleEditAvatarClick,\n        onCardClick: setSelectedCard,\n        cards: cards,\n        onCardLike: handleCardLike,\n        onCardDelete: handleCardDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        isOpen: isEditProfilePopupOpen,\n        onClose: closeAllPopups,\n        onUpdateUser: handleUpdateUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        isOpen: isAddPlacePopupOpen,\n        onClose: closeAllPopups,\n        onSubmit: handleAddPlaceSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        isOpen: isEditAvatarPopupOpen,\n        onClose: closeAllPopups,\n        onUpdateAvatar: handleUpdateAvatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n        title: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",\n        name: \"add-Form\",\n        onClose: closeAllPopups,\n        buttonText: \"\\u0414\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        card: selectedCard,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 4\n  }, this);\n}\n\n_s(App, \"O0sCogqYWKBr4M4wOuhGGyK74ZE=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Header","Main","Footer","PopupWithForm","EditProfilePopup","ImagePopup","useState","useEffect","api","CurrentUserContext","EditAvatarPopup","AddPlacePopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","selectedCard","setSelectedCard","name","link","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","currentUser","setCurrentUser","myID","about","avatar","cohort","getUserInfo","then","catch","err","console","log","handleUpdateUser","data","setUserInfo","handleUpdateAvatar","changeAvatar","cards","setCards","getCardInfo","map","item","likes","_id","key","authorCardId","owner","handleCardLike","card","isLiked","some","i","changeLikeCardStatus","newCard","state","c","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","setNewCardInfo"],"sources":["/Users/antonfondov/Ya_Project/mesto-react/src/components/App.js"],"sourcesContent":["import Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js'\nimport EditProfilePopup from './EditProfilePopup.js';\nimport ImagePopup from './ImagePopup.js';\nimport {useState} from 'react';\nimport {useEffect} from 'react';\nimport {api} from '../utils/Api.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js'\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\n\nfunction App() {\n\n\tconst [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false)\n\tconst [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n\tconst [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n\tconst [selectedCard, setSelectedCard] = useState({name: '', link: ''});\n\n\tconst handleEditAvatarClick = () => setEditAvatarPopupOpen(true);\n\tconst handleEditProfileClick = () => setIsEditProfilePopupOpen(true);\n\tconst handleAddPlaceClick = () => setAddPlacePopupOpen(true);\n\tconst closeAllPopups = () => {\n\t\tsetEditAvatarPopupOpen(false);\n\t\tsetIsEditProfilePopupOpen(false);\n\t\tsetAddPlacePopupOpen(false);\n\t\tsetSelectedCard({name: '', link: ''});\n\t}\n\tconst [currentUser, setCurrentUser] = useState({\n\t\tmyID: '',\n\t\tabout: '',\n\t\tavatar: '',\n\t\tcohort: '',\n\t\tname: ''\n\t})\n\tuseEffect(() => {\n\t\tapi.getUserInfo().then(setCurrentUser\n\t\t).catch(err => console.log('что-то пошло не так', err));\n\t}, []);\n\n\tconst handleUpdateUser = (data) => {\n\t\tapi.setUserInfo(data).then(setCurrentUser)\n\t\t\t\t.catch(err => console.log('что-то пошло не так', err));\n\t}\n\tconst handleUpdateAvatar = (data) => {\n\t\tapi.changeAvatar(data.avatar).then(setCurrentUser)\n\t\t\t\t.catch(err => console.log('что-то пошло не так', err));\n\t}\n\n\t//Получение массива с карточками\n\tconst [cards, setCards] = useState([]);\n\tuseEffect(() => {\n\t\tapi.getCardInfo().then(data => {\n\t\t\tsetCards(data.map(item => ({\n\t\t\t\t\t\tlikes: item.likes,\n\t\t\t\t\t\tlink: item.link,\n\t\t\t\t\t\tname: item.name,\n\t\t\t\t\t\t_id: item._id,\n\t\t\t\t\t\tkey: item._id,\n\t\t\t\t\t\tauthorCardId:item.owner._id\n\t\t\t\t\t})\n\t\t\t));\n\t\t})\n\t\t\t\t.catch(err => console.log('что-то пошло не так', err));\n\t}, []);\n\n\n\tfunction handleCardLike(card) {\n\t\t// Снова проверяем, есть ли уже лайк на этой карточке\n\t\tconst isLiked = card.likes.some(i => i._id === currentUser._id);\n\n\t\t// Отправляем запрос в API и получаем обновлённые данные карточки\n\t\tapi.changeLikeCardStatus(card._id, isLiked).then((newCard) => {\n\t\t\tsetCards((state) => state.map((c) => {\n\t\t\t\tc.key = c._id;\n\t\t\t\treturn c._id === card._id ? newCard : c;\n\t\t\t}));\n\t\t});\n\t}\n\n\tfunction handleCardDelete (card) {\n\t\tapi.deleteCard(card._id).then (newCard => {\n\t\t\tsetCards((state) => state.filter(c => c._id !== card._id))\n\t\t})\n\n\t}\n\n\tfunction handleAddPlaceSubmit (data) {\n\t\tapi.setNewCardInfo(data).then(newCard => {\n\t\t\tsetCards([newCard, ...cards])\n\n\t\t})\n\t\t\t\t.catch(err => console.log('что-то пошло не так', err));\n\t}\n\n\treturn (\n\t\t\t<CurrentUserContext.Provider value={currentUser}>\n\t\t\t\t\t<div className='root'>\n\n\t\t\t\t\t\t<Header/>\n\n\t\t\t\t\t\t<Main onEditProfile={handleEditProfileClick}\n\t\t\t\t\t\t      onAddPlace={handleAddPlaceClick}\n\t\t\t\t\t\t      onEditAvatar={handleEditAvatarClick}\n\t\t\t\t\t\t      onCardClick={setSelectedCard}\n\t\t\t\t\t\t      cards={cards}\n\t\t\t\t\t\t      onCardLike={handleCardLike}\n\t\t\t\t\t\t      onCardDelete={handleCardDelete}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Footer/>\n\t\t\t\t\t\t<EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups}\n\t\t\t\t\t\t                  onUpdateUser={handleUpdateUser}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<AddPlacePopup isOpen={isAddPlacePopupOpen}\n\t\t\t\t\t\t               onClose={closeAllPopups}\n\t\t\t\t\t\t               onSubmit={handleAddPlaceSubmit}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<EditAvatarPopup isOpen={isEditAvatarPopupOpen}\n\t\t\t\t\t\t                 onClose={closeAllPopups}\n\t\t\t\t\t\t                 onUpdateAvatar={handleUpdateAvatar}\n\t\t\t\t\t\t/>\n\n\n\t\t\t\t\t\t<PopupWithForm title=\"Вы уверены?\" name='add-Form'\n\t\t\t\t\t\t               onClose={closeAllPopups}\n\t\t\t\t\t\t               buttonText=\"Да\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n\n\t\t\t\t\t</div>\n\t\t\t</CurrentUserContext.Provider>\n\t);\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}